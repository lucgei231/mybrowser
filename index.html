<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL in Iframe with Dynamic Tabs</title>

    <!-- Meta Tags for Web App -->
    <meta name="theme-color" content="#007BFF">
    <meta name="apple-mobile-web-app-title" content="URL in Iframe">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="description" content="A simple web app that lets you open URLs in a dynamic iframe with tabs.">
    <meta name="author" content="Your Name">

    <!-- Green Circle SVG as Favicon -->
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53MzIuZGVzaWduL3JlYWRhdGQteXVpMjgK4vRHgZXJv" />

    <!-- Embedded Manifest JSON -->
    <script type="application/json" id="manifest">
        {
            "name": "URL in Iframe",
            "short_name": "IframeApp",
            "description": "A simple web app that lets you open URLs in a dynamic iframe with tabs.",
            "start_url": "/",
            "display": "standalone",
            "background_color": "#f0f0f0",
            "theme_color": "#007BFF",
            "icons": [
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53MzIuZGVzaW5l=",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                }
            ]
        }
    </script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #007BFF;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .tabs {
            display: flex;
            padding: 10px;
            background-color: #f1f1f1;
            flex-wrap: wrap;
        }
        .tab {
            padding: 10px;
            margin-right: 5px;
            cursor: pointer;
            background-color: #ddd;
            position: relative;
        }
        .tab.active {
            background-color: #007BFF;
            color: white;
        }
        .tab input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
            color: white;
        }
        #iframe-container {
            position: relative;
        }
        iframe {
            width: 100%;
            height: 80vh;
        }
        #fullscreen-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
        }
        #restore-btn {
            display: none;
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
        }
        .full-screen iframe {
            height: 100vh;
        }
    </style>
</head>
<body>

    <header>
        <h1>Iframe Browser with Dynamic Tabs</h1>
    </header>

    <!-- URL Input -->
    <input type="text" id="url-input" placeholder="Enter URL (without https://)" style="width: 70%; padding: 5px; margin: 10px;">

    <!-- Tabs Section -->
    <div class="tabs" id="tabs">
        <div class="tab active" data-url="about:blank">
            <input type="text" value="New Tab" />
        </div>
    </div>

    <!-- Iframe Container -->
    <div id="iframe-container">
        <iframe id="iframe" src="about:blank"></iframe>
        <button id="fullscreen-btn">Fullscreen</button>
        <button id="restore-btn">Restore</button>
    </div>

    <script>
        const tabsContainer = document.getElementById('tabs');
        const iframe = document.getElementById('iframe');
        const urlInput = document.getElementById('url-input');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const restoreBtn = document.getElementById('restore-btn');

        let tabs = [
            { name: 'New Tab', url: 'about:blank', active: true }
        ];

        function createTab(name, url) {
            const tab = document.createElement('div');
            tab.classList.add('tab');
            const input = document.createElement('input');
            input.type = 'text';
            input.value = name;
            input.addEventListener('blur', () => {
                const tabData = tabs.find(t => t.url === url);
                if (tabData) {
                    tabData.name = input.value;
                    input.disabled = true;
                }
            });
            tab.appendChild(input);
            tab.addEventListener('click', () => activateTab(tab, url));
            tabsContainer.appendChild(tab);
        }

        function activateTab(tab, url) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            iframe.src = url;
            tabs.forEach(t => t.active = false);
            tabs.find(t => t.url === url).active = true;
        }

        function addTab() {
            const newTab = { name: 'New Tab', url: 'about:blank', active: false };
            tabs.push(newTab);
            createTab(newTab.name, newTab.url);
            activateTab(tabsContainer.lastChild, newTab.url);
        }

        function removeTab(tabElement, url) {
            const index = tabs.findIndex(t => t.url === url);
            if (index !== -1) {
                tabs.splice(index, 1);
                tabsContainer.removeChild(tabElement);
                if (tabs.length === 0) {
                    addTab();
                } else {
                    activateTab(tabsContainer.firstChild, tabs[0].url);
                }
            }
        }

        // Handle URL input
        urlInput.addEventListener('change', () => {
            const url = `https://${urlInput.value}`;
            const activeTab = tabs.find(t => t.active);
            if (activeTab) {
                activeTab.url = url;
                iframe.src = url;
            }
        });

        // Fullscreen and Restore functionality
        fullscreenBtn.addEventListener('click', () => {
            document.body.classList.add('full-screen');
            fullscreenBtn.style.display = 'none';
            restoreBtn.style.display = 'block';
        });

        restoreBtn.addEventListener('click', () => {
            document.body.classList.remove('full-screen');
            fullscreenBtn.style.display = 'block';
            restoreBtn.style.display = 'none';
        });

        // Add initial tab
        addTab();
    </script>

</body>
</html>
